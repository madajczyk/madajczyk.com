{{ define "main" }}

<div class="column is-10 is-offset-1">

  <div class="columns">
    <div class="column is-1 is-offset-3 ">
      <h1 class="title is-1" style="padding-top: 30px;">Hi!</h1>
    </div>
    <div class="column is-4">
      <p class="title">
        
      </p>
      <p class="pt-3"></p>
      <p class="subtitle is-vcentered">
            Hey there, I'm Lee.  I do a few different nerdy things, and
            sometimes I remember to write them down here.
      </p>
    </div>
    <div class="column is-2" style="text-align: right">
      <figure class="image is-128x128">
        <img src="icons/madajczyk-512.jpg" alt="Placeholder image" class="is-rounded">
      </figure>
    </div>
  </div>

  <main aria-role="main">

  {{/* Define a section to pull recent posts from. For Hugo 0.20 this will default to the section with the most number of pages. */}}
  {{ $mainSections := .Site.Params.mainSections | default (slice "post") }}
  {{/* Create a variable with that section to use in multiple places. */}}
  {{ $section := where .Site.RegularPages "Section" "in" $mainSections }}
  {{/* Check to see if the section is defined for ranging through it */}}
  {{ $section_count := len $section }}
  {{ if ge $section_count 1 }}
    {{/* Derive the section name  */}}
    {{ $section_name := index (.Site.Params.mainSections) 0 }}
    <h1 class="title is-3">Latest Ramblings</h1>
    <div class="pa3 pa4-ns w-100 w-70-ns center">

      <div class="card">
        <div class="card-content">
          <div class="content">
            {{ $n_posts := $.Param "recent_posts_number" | default 1 }}
            <section>
              {{/* Range through the first $n_posts items of the section */}}
              {{ range (first $n_posts $section) }}
                <div class="relative w-100 mb4">
                  {{ .Render "summary-with-image" }}
                </div>
              {{ end }}
            </section>
          </div>
        </div>
      </div>
      
      <p class="pt-4"></p>

      

      {{ if ge $section_count (add $n_posts 1) }}
      <section>
        

        <div class="columns">
        {{/* Now, range through the next four after the initial $n_posts items. Nest the requirements, "after" then "first" on the outside */}}
        {{ range (first 3 (after $n_posts $section))  }}
        <div class="column">
          <div class="card">
            <div class="card-content">
              <div class="content">
                <h2 class="f5 fw4 mb4 dib {{ cond (eq $.Site.Language.LanguageDirection "rtl") "ml3" "mr3" }}">
                  <a href="{{ .RelPermalink }}" class="link black dim">
                    {{ .Title }}
                  </a>
                </h2>
                <p>{{ .Description }}</p>
                <time datetime="{{ .Date.UTC }}" itemprop="datePublished">{{ .Date.Format "January 2, 2006" }}</time> - Tagged:&nbsp;
                {{- if .Params.tags -}} 
                    {{- range $key, $tag := .Params.tags }} 
                        {{- if ne $key 0 }}, {{ end }}<span><a href='/tags/{{ $tag | urlize }}'>{{ $tag }}</a></span>
                    {{- end -}}
                  {{- else -}}
                      None
                {{- end -}}
              </div>
            </div>
          </div>
        </div>
        {{ end }}
        </div>



        {{/* As above, Use $section_name to get the section title, and URL. Use "with" to only show it if it exists */}}
        {{ with .Site.GetPage "section" $section_name }}
          <a href="{{ .RelPermalink }}" class="link db f6 pa2 br3 bg-mid-gray white dim w4 tc">{{ i18n "allTitle" . }}</a>
        {{ end }}
        </section>
      {{ end }}

      </div>
  {{ end }}
      <div class="has-text-centered">
        <a class="button is-info">See Older Posts</a>
      </div>
</main>
  
</div>

{{ end }}